<!-- Header with user info and logout -->
<div class="header">
  <div class="header-content">
    <h1 class="titre-principal">Analyse Tactique Football</h1>
    <div class="user-info">
      <span>Connecté en tant que: {{ currentUser?.username }}</span>
      <button class="logout-btn" (click)="logout()">Déconnexion</button>
    </div>
  </div>
</div>

<div class="bulk-upload-page">
  <div class="bulk-upload-header">
    <button class="back-btn" (click)="goBack()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
        <polyline points="15,18 9,12 15,6"/>
      </svg>
      Retour
    </button>
  </div>

<p class="sous-titre">Annotez vos séquences vidéo pour analyser les schémas tactiques</p>

<div class="video-upload-card">

  <div class="video-upload-header">
    <h2 class="video-upload-title">

      <span class="video-upload-title-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" stroke="#222" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 48 48" style="vertical-align:middle;">
          <path d="M24 32V12"/>
          <path d="M16 20l8-8 8 8"/>
          <path d="M8 36v2a2 2 0 0 0 2 2h28a2 2 0 0 0 2-2v-2"/>
        </svg>
      </span>
      Séquence Vidéo
    </h2>
    <p class="video-upload-subtitle">Uploadez une séquence de 3-7 secondes</p>
  </div>
  
  <!-- Upload Status Messages -->
  <div *ngIf="isUploading" class="upload-status uploading">
    <p>Upload en cours...</p>
  </div>
  
  <div *ngIf="uploadError" class="upload-status error">
    <p>{{ uploadError }}</p>
  </div>
  
  <div *ngIf="uploadSuccess && uploadedVideo" class="upload-status success">
    <p>Vidéo uploadée avec succès!</p>
    <p *ngIf="uploadedVideo.filename">Fichier: {{ uploadedVideo.filename }}</p>
  </div>

  <!-- Video Preview Section -->
  <div *ngIf="videoPreviewUrl && selectedFile" class="video-preview-section">
    <div class="video-preview-header">
      <h3>Aperçu de la vidéo</h3>
      <p class="file-info">{{ fileName }}</p>
    </div>
    
    <div class="video-player-container">
      <video 
        class="video-preview-player" 
        [src]="videoPreviewUrl" 
        controls 
        preload="metadata"
        width="100%"
        height="auto">
        Votre navigateur ne supporte pas la lecture de vidéos.
      </video>
    </div>
    
    <div class="video-actions">
      <button 
        type="button" 
        class="btn btn-primary upload-btn" 
        (click)="uploadVideo()" 
        [disabled]="isUploadDisabled()">
        <span *ngIf="!isUploading">Uploader la vidéo</span>
        <span *ngIf="isUploading">Upload en cours...</span>
      </button>
      
      <button 
        type="button" 
        class="btn btn-secondary cancel-btn" 
        (click)="cancelUpload()" 
        [disabled]="isUploading">
        Annuler
      </button>
    </div>
  </div>

  <!-- File Selection Dropzone (only show when no video is selected) -->
  <label *ngIf="!selectedFile" class="video-upload-dropzone" [class.disabled]="isUploading">
    <input type="file" accept="video/*" class="video-upload-input" (change)="onFileSelected($event)" [disabled]="isUploading">
    <span class="video-upload-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="none" stroke="#94a3b8" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 48 48">
        <path d="M24 32V12"/>
        <path d="M16 20l8-8 8 8"/>
        <path d="M8 36v2a2 2 0 0 0 2 2h28a2 2 0 0 0 2-2v-2"/>
      </svg>
    </span>
    <span class="video-upload-text">
      {{ isUploading ? 'Upload en cours...' : 'Cliquez pour sélectionner une vidéo' }}
    </span>
  </label>
<div class="predict-container">
        <button id="predictBtn" class="predict-btn" (click)="triggerPrediction()" [disabled]="!uploadedVideo">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" style="margin-right: 8px;">
          <rect x="2" y="7" width="15" height="10" rx="2" ry="2"/>
          <polygon points="23 7 16 12 23 17 23 7"/>
        </svg>
        Analyser IA (Rapport)
      </button>
</div></div>

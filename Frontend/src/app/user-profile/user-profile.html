<div class="profile-container">
  <div class="profile-header">
    <h2>Mon Profil</h2>
    <div class="header-actions">
      <button class="back-btn" (click)="goBack()">Retour</button>
      <button class="logout-btn" (click)="logout()">Déconnexion</button>
    </div>
  </div>

  <div *ngIf="showMessage" [class]="messageType === 'error' ? 'message error' : 'message success'">
    {{ message }}
  </div>

  <div class="profile-content">
    <div *ngIf="isLoading" class="loading">
      Chargement...
    </div>

    <div *ngIf="!isLoading && currentUser" class="profile-info">
      <div class="info-section">
        <h3>Informations personnelles</h3>
        
        <div *ngIf="!isEditing" class="info-display">
          <div class="info-row">
            <label>Nom d'utilisateur:</label>
            <span>{{ currentUser.username }}</span>
          </div>
          <div class="info-row">
            <label>Nom complet:</label>
            <span>{{ currentUser.fullname }}</span>
          </div>
          <div class="info-row">
            <label>Email:</label>
            <span>{{ currentUser.email }}</span>
          </div>
          <div class="info-row">
            <label>Téléphone:</label>
            <span>{{ currentUser.phone || 'Non renseigné' }}</span>
          </div>
          <button class="edit-btn" (click)="startEditing()">Modifier</button>
        </div>

        <form *ngIf="isEditing" (ngSubmit)="saveProfile()" class="edit-form">
          <div class="form-group">
            <label>Nom d'utilisateur: <span style="color: red;">*</span></label>
            <input type="text" [(ngModel)]="formUser.username" name="username" required>
          </div>
          <div class="form-group">
            <label>Nom complet: <span style="color: red;">*</span></label>
            <input type="text" [(ngModel)]="formUser.fullname" name="fullname" required>
          </div>
          <div class="form-group">
            <label>Email: <span style="color: red;">*</span></label>
            <input type="email" [(ngModel)]="formUser.email" name="email" required>
          </div>
          <div class="form-group">
            <label>Téléphone (optionnel):</label>
            <input type="text" [(ngModel)]="formUser.phone" name="phone" placeholder="Numéro de téléphone (optionnel)">
          </div>
          <div class="form-actions">
            <button type="submit" [disabled]="isLoading">Enregistrer</button>
            <button type="button" (click)="cancelEditing()">Annuler</button>
          </div>
        </form>
      </div>

      <div class="password-section">
        <h3>Changer le mot de passe</h3>
        <div class="password-form">
          <div class="form-group">
            <label>Nouveau mot de passe:</label>
            <input type="password" [(ngModel)]="formUser.password" name="password" placeholder="Saisissez votre nouveau mot de passe">
          </div>
          <button class="change-password-btn" (click)="changePassword()" [disabled]="isLoading">
            {{ isLoading ? 'Modification...' : 'Changer le mot de passe' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div> 